<div class="container">
    <div class="content">
        <module-header></module-header>
        <module-header-jumbotron></module-header-jumbotron>
        <module-countdown></module-countdown>
        <module-menu></module-menu>
        <module-modal-pembayaran></module-modal-pembayaran>
        <module-rundown></module-rundown>
    </div>
</div>
<script>    

    function appInit() {
        // Initial Page Content
        appLoadContent($("module-header"),
        'app-pages/halaman-utama/module-header.html', {replace: true});

        appLoadContent($("module-header-jumbotron"),
        'app-pages/halaman-utama/module-header-jumbotron.html', {replace: true});

        appLoadContent($("module-countdown"),
        'app-pages/halaman-utama/module-countdown.html', {replace: true});

        appLoadContent($("module-menu"),
        'app-pages/halaman-utama/module-menu.html', {replace: true});

        appLoadContent($("module-rundown"),
        'app-pages/halaman-utama/module-rundown.html', {replace: true});

        // Modal
        if (appAccount.role == 'siswa'){
            appLoadContent($("module-modal-pembayaran"),
            'app-pages/halaman-utama/module-modal-pembayaran.html', {replace: true});
        }
    }

    function appLogin() {
        // Load App Data dan User Data, please note this need to wait for it's finish
        $.ajax({
            url: `${appAPIServer}/account/alive`, dataType: "json",
            method: "POST", data:{
                sesi: loadData('loginSesi')
            },
            success: function( response ) {
                // Logout jika sesi habis / tidak berlaku
                if (response.logout){
                    appDeleteStorage('all');
                    window.location.reload();
                }

                // Simpan appdata dan account data
                if (response.appdata){
                    appData = response.appdata;
                }
                if (response.accountdata){
                    appAccount = response.accountdata;
                }
                appInit();
            },
            error: function() {
                appSplashHide();
            }
        });
    }
    appLogin();
    
</script>